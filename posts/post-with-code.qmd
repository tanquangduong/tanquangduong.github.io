---
title: "Post With Code"
subtitle: "Create your own models easily, no GPU required!"
author: "Harlow Malloc"
date: "2024-08-27"
categories: [news, code, analysis]
image: "/images/postcode/image.jpg"
colab: <a href="https://colab.research.google.com/drive/1_JS7JKJAQozD48-LhYdegcuuZ2ddgXfr?usp=sharing"><img src="images/colab.png" alt="Open In Colab"></a>
---
<center><img src="/images/bg/bg-snappify-10.png"></center>

::: {.column-margin}
Find many more hands-on GenAI in my Udemy course, [**Hands-on Generative AI Engineering with Large Language Model**](https://www.udemy.com/course/hands-on-generative-ai-engineering-with-large-language-model/?referralCode=0775DF5DDD432646AD97&couponCode=OF83024E) üëá
<a href="https://www.udemy.com/course/hands-on-generative-ai-engineering-with-large-language-model/?referralCode=0775DF5DDD432646AD97&couponCode=OF83024E"><img src="/images/genai_course/GenAI-Course-Thumbnail-1.png" id="gnn-book"></a>
:::

## ü§ù Merge algorithms

In this section, we will focus on four methods currently implemented in [mergekit](https://github.com/cg123/mergekit). Note that there are other methods, such as [linear](https://github.com/cg123/mergekit/tree/1011ef3a84e4c5545473602baf7ef32d535044a9#linear) and [Task Arithmetic](https://arxiv.org/abs/2212.04089). If you're interested in papers on model merging, I recommend [this excellent collection](https://huggingface.co/collections/osanseviero/model-merging-65097893623330a3a51ead66) on Hugging Face.

*Example of configuration:*

```yaml
slices:
    - sources:
        - model: OpenPipe/mistral-ft-optimized-1218
            layer_range: [0, 32]
        - model: mlabonne/NeuralHermes-2.5-Mistral-7B
            layer_range: [0, 32]
merge_method: slerp
base_model: OpenPipe/mistral-ft-optimized-1218
parameters:
    t:
        - filter: self_attn
        value: [0, 0.5, 0.3, 0.7, 1]
        - filter: mlp
        value: [1, 0.5, 0.7, 0.3, 0]
        - value: 0.5
dtype: bfloat16
```

## üíª Merge your own models

In this section, we will use mergekit to load a merge configuration, run it, and upload the resulting model to the Hugging Face Hub.

First of all, we install mergekit directly from source as follows:

```python
!git clone https://github.com/cg123/mergekit.git
!cd mergekit && pip install -q -e .
```

In the following block, we load the merge configuration in a YAML format. We also specify the name of the merged model for future use. You can copy/paste any configuration from the previous section here.
